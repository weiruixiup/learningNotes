### 进程与线程

1. 进程： CPU 在**运行指令及加载和保存上下文所需的时间**，可以理解为执行一个程序。

2. 线程：是进程中更小的单位，描述执行一段指令需要的时间。

   eg：当你打开一个 Tab 页时，其实就是创建了一个进程，一个进程中可以有多个线程，比如渲染线程、JS 引擎线程、HTTP 请求线程等等。当你发起一个请求时，其实就是创建了一个线程，当请求结束后，该线程可能就会被销毁。

3. 单线程：同一时间只能做一件事。**JS是单线程运行**。

4. JS单线程运行的原因：避免渲染DOM冲突。（如果能同时执行两段JS，并且是对同一个DOM进行操作，难么就难免冲突）。

5. 解决方案：异步。

6. 实现方式：Event Loop

### Event Loop

1. 什么是EventLoop：事件循环，JS实现异步的解决方案。

2. 执行顺序：先执行同步代码，也就是在执行栈中放入函数。有异步函数时，按顺序把异步函数放在队列中，待同步函数执行完，轮询执行异步队列的函数。（也可以理解当执行栈为空了，Event Loop 就会从异步队列中拿出需要执行的代码放入执行栈中，本质上来说，JS中的异步还是同步行为）

   - 首先执行同步代码，属于宏任务。

   - 当执行完所有同步代码后，执行栈为空，查询是否有异步代码需要执行。

   - 执行所有的微任务。

   - 执行完所有微任务后，如有必要会渲染页面。

   - 进行下一轮的Event Loop，执行宏任务中的异步代码，也就是setTimeout中的回调函数。

     **宏任务 => 微任务 => 宏任务的异步代码**

     ![](./../assets/执行顺序.jpg)

3. 在异步队列中任务源的区分：

   - [ ] **微任务**（microtask），在ES6规范中称为**jobs**
   - [ ] **宏任务**（macrotask），在ES6规范中称为**task**

4. **微任务包含**：`Promise`，`process.nextTick`(Node独有)

5. **宏任务包含**：`script`，`setTimeout`，`setInterval`，`setImmediate` 

​	

​	







​	